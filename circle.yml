machine:
  environment:
    XCODE_SCHEME: "Tokopedia"

  xcode:
    version: 9.1

dependencies:
  override:
    - yarn
    - yarn run postinstall
    - gem install fastlane

test:
  override:
    - yarn danger

general:
  branches:
    only:
      - develop
      - /feature\/.*/
      - /hotfix\/.*/
      - /release\/.*/

deployment:
  devel_distribution:
    branch: [develop, /feature\/.*/]
    commands:
      - fastlane devel

  release_distribution:
    branch: [/hotfix\/.*/, /release\/.*/]
    commands:
      - fastlane beta:
        timeout: 1800
