machine:
  environment:
    XCODE_SCHEME: "Tokopedia"

  xcode:
    version: 8.3.2

dependencies:
  override:
    - brew install node
    - brew install yarn
    - npm install
    - yarn
    - gem install fastlane

test:
  override:
    - yarn danger

general:
  branches:
    only:
      - devel
      - release
      - /feature\/.*/
      - /release\/.*/

deployment:
  devel_distribution:
    branch: [devel, /feature\/.*/]
    commands:
      - fastlane devel

  release_distribution:
    branch: [release, /release\/.*/]
    commands:
      - fastlane beta
